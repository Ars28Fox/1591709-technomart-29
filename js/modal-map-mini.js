const mapLink=document.querySelector(".contacts__map"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".modal__close"),mapTabTrap=mapPopup.querySelector(".modal-map__tab-trap"),focusableElementsMap='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',firstFocusableElementMap=mapPopup.querySelectorAll(focusableElementsMap)[0],focusableContentMap=mapPopup.querySelectorAll(focusableElementsMap),lastFocusableElementMap=focusableContentMap[focusableContentMap.length-1];mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal--active"),mapTabTrap.focus()}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal--active"),mapLink.focus()}),window.addEventListener("keydown",function(e){27===e.keyCode&&mapPopup.classList.contains("modal--active")&&(mapPopup.classList.remove("modal--active"),mapLink.focus())}),window.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===firstFocusableElementMap&&(lastFocusableElementMap.focus(),e.preventDefault()):document.activeElement===lastFocusableElementMap&&(firstFocusableElementMap.focus(),e.preventDefault()))}),firstFocusableElementMap.focus();
